{"version":3,"file":"index.js","sources":["../dist-src/util/lowercase-keys.js","../dist-src/util/merge-deep.js","../dist-src/util/remove-undefined-properties.js","../dist-src/merge.js","../dist-src/util/add-query-parameters.js","../dist-src/util/extract-url-variable-names.js","../dist-src/util/omit.js","../dist-src/util/url-template.js","../dist-src/parse.js","../dist-src/endpoint-with-defaults.js","../dist-src/with-defaults.js","../dist-src/version.js","../dist-src/defaults.js","../dist-src/index.js"],"sourcesContent":["export function lowercaseKeys(object) {\n    if (!object) {\n        return {};\n    }\n    return Object.keys(object).reduce((newObj, key) => {\n        newObj[key.toLowerCase()] = object[key];\n        return newObj;\n    }, {});\n}\n","import { isPlainObject } from \"is-plain-object\";\nexport function mergeDeep(defaults, options) {\n    const result = Object.assign({}, defaults);\n    Object.keys(options).forEach((key) => {\n        if (isPlainObject(options[key])) {\n            if (!(key in defaults))\n                Object.assign(result, { [key]: options[key] });\n            else\n                result[key] = mergeDeep(defaults[key], options[key]);\n        }\n        else {\n            Object.assign(result, { [key]: options[key] });\n        }\n    });\n    return result;\n}\n","export function removeUndefinedProperties(obj) {\n    for (const key in obj) {\n        if (obj[key] === undefined) {\n            delete obj[key];\n        }\n    }\n    return obj;\n}\n","import { lowercaseKeys } from \"./util/lowercase-keys\";\nimport { mergeDeep } from \"./util/merge-deep\";\nimport { removeUndefinedProperties } from \"./util/remove-undefined-properties\";\nexport function merge(defaults, route, options) {\n    if (typeof route === \"string\") {\n        let [method, url] = route.split(\" \");\n        options = Object.assign(url ? { method, url } : { url: method }, options);\n    }\n    else {\n        options = Object.assign({}, route);\n    }\n    // lowercase header names before merging with defaults to avoid duplicates\n    options.headers = lowercaseKeys(options.headers);\n    // remove properties with undefined values before merging\n    removeUndefinedProperties(options);\n    removeUndefinedProperties(options.headers);\n    const mergedOptions = mergeDeep(defaults || {}, options);\n    // mediaType.previews arrays are merged, instead of overwritten\n    if (defaults && defaults.mediaType.previews.length) {\n        mergedOptions.mediaType.previews = defaults.mediaType.previews\n            .filter((preview) => !mergedOptions.mediaType.previews.includes(preview))\n            .concat(mergedOptions.mediaType.previews);\n    }\n    mergedOptions.mediaType.previews = mergedOptions.mediaType.previews.map((preview) => preview.replace(/-preview/, \"\"));\n    return mergedOptions;\n}\n","export function addQueryParameters(url, parameters) {\n    const separator = /\\?/.test(url) ? \"&\" : \"?\";\n    const names = Object.keys(parameters);\n    if (names.length === 0) {\n        return url;\n    }\n    return (url +\n        separator +\n        names\n            .map((name) => {\n            if (name === \"q\") {\n                return (\"q=\" + parameters.q.split(\"+\").map(encodeURIComponent).join(\"+\"));\n            }\n            return `${name}=${encodeURIComponent(parameters[name])}`;\n        })\n            .join(\"&\"));\n}\n","const urlVariableRegex = /\\{[^}]+\\}/g;\nfunction removeNonChars(variableName) {\n    return variableName.replace(/^\\W+|\\W+$/g, \"\").split(/,/);\n}\nexport function extractUrlVariableNames(url) {\n    const matches = url.match(urlVariableRegex);\n    if (!matches) {\n        return [];\n    }\n    return matches.map(removeNonChars).reduce((a, b) => a.concat(b), []);\n}\n","export function omit(object, keysToOmit) {\n    return Object.keys(object)\n        .filter((option) => !keysToOmit.includes(option))\n        .reduce((obj, key) => {\n        obj[key] = object[key];\n        return obj;\n    }, {});\n}\n","// Based on https://github.com/bramstein/url-template, licensed under BSD\n// TODO: create separate package.\n//\n// Copyright (c) 2012-2014, Bram Stein\n// All rights reserved.\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions\n// are met:\n//  1. Redistributions of source code must retain the above copyright\n//     notice, this list of conditions and the following disclaimer.\n//  2. Redistributions in binary form must reproduce the above copyright\n//     notice, this list of conditions and the following disclaimer in the\n//     documentation and/or other materials provided with the distribution.\n//  3. The name of the author may not be used to endorse or promote products\n//     derived from this software without specific prior written permission.\n// THIS SOFTWARE IS PROVIDED BY THE AUTHOR \"AS IS\" AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n// MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO\n// EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n// INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,\n// BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n// EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n/* istanbul ignore file */\nfunction encodeReserved(str) {\n    return str\n        .split(/(%[0-9A-Fa-f]{2})/g)\n        .map(function (part) {\n        if (!/%[0-9A-Fa-f]/.test(part)) {\n            part = encodeURI(part).replace(/%5B/g, \"[\").replace(/%5D/g, \"]\");\n        }\n        return part;\n    })\n        .join(\"\");\n}\nfunction encodeUnreserved(str) {\n    return encodeURIComponent(str).replace(/[!'()*]/g, function (c) {\n        return \"%\" + c.charCodeAt(0).toString(16).toUpperCase();\n    });\n}\nfunction encodeValue(operator, value, key) {\n    value =\n        operator === \"+\" || operator === \"#\"\n            ? encodeReserved(value)\n            : encodeUnreserved(value);\n    if (key) {\n        return encodeUnreserved(key) + \"=\" + value;\n    }\n    else {\n        return value;\n    }\n}\nfunction isDefined(value) {\n    return value !== undefined && value !== null;\n}\nfunction isKeyOperator(operator) {\n    return operator === \";\" || operator === \"&\" || operator === \"?\";\n}\nfunction getValues(context, operator, key, modifier) {\n    var value = context[key], result = [];\n    if (isDefined(value) && value !== \"\") {\n        if (typeof value === \"string\" ||\n            typeof value === \"number\" ||\n            typeof value === \"boolean\") {\n            value = value.toString();\n            if (modifier && modifier !== \"*\") {\n                value = value.substring(0, parseInt(modifier, 10));\n            }\n            result.push(encodeValue(operator, value, isKeyOperator(operator) ? key : \"\"));\n        }\n        else {\n            if (modifier === \"*\") {\n                if (Array.isArray(value)) {\n                    value.filter(isDefined).forEach(function (value) {\n                        result.push(encodeValue(operator, value, isKeyOperator(operator) ? key : \"\"));\n                    });\n                }\n                else {\n                    Object.keys(value).forEach(function (k) {\n                        if (isDefined(value[k])) {\n                            result.push(encodeValue(operator, value[k], k));\n                        }\n                    });\n                }\n            }\n            else {\n                const tmp = [];\n                if (Array.isArray(value)) {\n                    value.filter(isDefined).forEach(function (value) {\n                        tmp.push(encodeValue(operator, value));\n                    });\n                }\n                else {\n                    Object.keys(value).forEach(function (k) {\n                        if (isDefined(value[k])) {\n                            tmp.push(encodeUnreserved(k));\n                            tmp.push(encodeValue(operator, value[k].toString()));\n                        }\n                    });\n                }\n                if (isKeyOperator(operator)) {\n                    result.push(encodeUnreserved(key) + \"=\" + tmp.join(\",\"));\n                }\n                else if (tmp.length !== 0) {\n                    result.push(tmp.join(\",\"));\n                }\n            }\n        }\n    }\n    else {\n        if (operator === \";\") {\n            if (isDefined(value)) {\n                result.push(encodeUnreserved(key));\n            }\n        }\n        else if (value === \"\" && (operator === \"&\" || operator === \"?\")) {\n            result.push(encodeUnreserved(key) + \"=\");\n        }\n        else if (value === \"\") {\n            result.push(\"\");\n        }\n    }\n    return result;\n}\nexport function parseUrl(template) {\n    return {\n        expand: expand.bind(null, template),\n    };\n}\nfunction expand(template, context) {\n    var operators = [\"+\", \"#\", \".\", \"/\", \";\", \"?\", \"&\"];\n    return template.replace(/\\{([^\\{\\}]+)\\}|([^\\{\\}]+)/g, function (_, expression, literal) {\n        if (expression) {\n            let operator = \"\";\n            const values = [];\n            if (operators.indexOf(expression.charAt(0)) !== -1) {\n                operator = expression.charAt(0);\n                expression = expression.substr(1);\n            }\n            expression.split(/,/g).forEach(function (variable) {\n                var tmp = /([^:\\*]*)(?::(\\d+)|(\\*))?/.exec(variable);\n                values.push(getValues(context, operator, tmp[1], tmp[2] || tmp[3]));\n            });\n            if (operator && operator !== \"+\") {\n                var separator = \",\";\n                if (operator === \"?\") {\n                    separator = \"&\";\n                }\n                else if (operator !== \"#\") {\n                    separator = operator;\n                }\n                return (values.length !== 0 ? operator : \"\") + values.join(separator);\n            }\n            else {\n                return values.join(\",\");\n            }\n        }\n        else {\n            return encodeReserved(literal);\n        }\n    });\n}\n","import { addQueryParameters } from \"./util/add-query-parameters\";\nimport { extractUrlVariableNames } from \"./util/extract-url-variable-names\";\nimport { omit } from \"./util/omit\";\nimport { parseUrl } from \"./util/url-template\";\nexport function parse(options) {\n    // https://fetch.spec.whatwg.org/#methods\n    let method = options.method.toUpperCase();\n    // replace :varname with {varname} to make it RFC 6570 compatible\n    let url = (options.url || \"/\").replace(/:([a-z]\\w+)/g, \"{$1}\");\n    let headers = Object.assign({}, options.headers);\n    let body;\n    let parameters = omit(options, [\n        \"method\",\n        \"baseUrl\",\n        \"url\",\n        \"headers\",\n        \"request\",\n        \"mediaType\",\n    ]);\n    // extract variable names from URL to calculate remaining variables later\n    const urlVariableNames = extractUrlVariableNames(url);\n    url = parseUrl(url).expand(parameters);\n    if (!/^http/.test(url)) {\n        url = options.baseUrl + url;\n    }\n    const omittedParameters = Object.keys(options)\n        .filter((option) => urlVariableNames.includes(option))\n        .concat(\"baseUrl\");\n    const remainingParameters = omit(parameters, omittedParameters);\n    const isBinaryRequest = /application\\/octet-stream/i.test(headers.accept);\n    if (!isBinaryRequest) {\n        if (options.mediaType.format) {\n            // e.g. application/vnd.github.v3+json => application/vnd.github.v3.raw\n            headers.accept = headers.accept\n                .split(/,/)\n                .map((preview) => preview.replace(/application\\/vnd(\\.\\w+)(\\.v3)?(\\.\\w+)?(\\+json)?$/, `application/vnd$1$2.${options.mediaType.format}`))\n                .join(\",\");\n        }\n        if (options.mediaType.previews.length) {\n            const previewsFromAcceptHeader = headers.accept.match(/[\\w-]+(?=-preview)/g) || [];\n            headers.accept = previewsFromAcceptHeader\n                .concat(options.mediaType.previews)\n                .map((preview) => {\n                const format = options.mediaType.format\n                    ? `.${options.mediaType.format}`\n                    : \"+json\";\n                return `application/vnd.github.${preview}-preview${format}`;\n            })\n                .join(\",\");\n        }\n    }\n    // for GET/HEAD requests, set URL query parameters from remaining parameters\n    // for PATCH/POST/PUT/DELETE requests, set request body from remaining parameters\n    if ([\"GET\", \"HEAD\"].includes(method)) {\n        url = addQueryParameters(url, remainingParameters);\n    }\n    else {\n        if (\"data\" in remainingParameters) {\n            body = remainingParameters.data;\n        }\n        else {\n            if (Object.keys(remainingParameters).length) {\n                body = remainingParameters;\n            }\n        }\n    }\n    // default content-type for JSON if body is set\n    if (!headers[\"content-type\"] && typeof body !== \"undefined\") {\n        headers[\"content-type\"] = \"application/json; charset=utf-8\";\n    }\n    // GitHub expects 'content-length: 0' header for PUT/PATCH requests without body.\n    // fetch does not allow to set `content-length` header, but we can set body to an empty string\n    if ([\"PATCH\", \"PUT\"].includes(method) && typeof body === \"undefined\") {\n        body = \"\";\n    }\n    // Only return body/request keys if present\n    return Object.assign({ method, url, headers }, typeof body !== \"undefined\" ? { body } : null, options.request ? { request: options.request } : null);\n}\n","import { merge } from \"./merge\";\nimport { parse } from \"./parse\";\nexport function endpointWithDefaults(defaults, route, options) {\n    return parse(merge(defaults, route, options));\n}\n","import { endpointWithDefaults } from \"./endpoint-with-defaults\";\nimport { merge } from \"./merge\";\nimport { parse } from \"./parse\";\nexport function withDefaults(oldDefaults, newDefaults) {\n    const DEFAULTS = merge(oldDefaults, newDefaults);\n    const endpoint = endpointWithDefaults.bind(null, DEFAULTS);\n    return Object.assign(endpoint, {\n        DEFAULTS,\n        defaults: withDefaults.bind(null, DEFAULTS),\n        merge: merge.bind(null, DEFAULTS),\n        parse,\n    });\n}\n","export const VERSION = \"7.0.5\";\n","import { getUserAgent } from \"universal-user-agent\";\nimport { VERSION } from \"./version\";\nconst userAgent = `octokit-endpoint.js/${VERSION} ${getUserAgent()}`;\n// DEFAULTS has all properties set that EndpointOptions has, except url.\n// So we use RequestParameters and add method as additional required property.\nexport const DEFAULTS = {\n    method: \"GET\",\n    baseUrl: \"https://api.github.com\",\n    headers: {\n        accept: \"application/vnd.github.v3+json\",\n        \"user-agent\": userAgent,\n    },\n    mediaType: {\n        format: \"\",\n        previews: [],\n    },\n};\n","import { withDefaults } from \"./with-defaults\";\nimport { DEFAULTS } from \"./defaults\";\nexport const endpoint = withDefaults(null, DEFAULTS);\n"],"names":["lowercaseKeys","object","Object","keys","reduce","newObj","key","toLowerCase","mergeDeep","defaults","options","result","assign","forEach","isPlainObject","removeUndefinedProperties","obj","undefined","merge","route","method","url","split","headers","mergedOptions","mediaType","previews","length","filter","preview","includes","concat","map","replace","addQueryParameters","parameters","separator","test","names","name","q","encodeURIComponent","join","urlVariableRegex","removeNonChars","variableName","extractUrlVariableNames","matches","match","a","b","omit","keysToOmit","option","encodeReserved","str","part","encodeURI","encodeUnreserved","c","charCodeAt","toString","toUpperCase","encodeValue","operator","value","isDefined","isKeyOperator","getValues","context","modifier","substring","parseInt","push","Array","isArray","k","tmp","parseUrl","template","expand","bind","operators","_","expression","literal","values","indexOf","charAt","substr","variable","exec","parse","body","urlVariableNames","baseUrl","omittedParameters","remainingParameters","isBinaryRequest","accept","format","previewsFromAcceptHeader","data","request","endpointWithDefaults","withDefaults","oldDefaults","newDefaults","DEFAULTS","endpoint","VERSION","userAgent","getUserAgent"],"mappings":"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"}